<h2>Impostazioni</h2>

<!-- Selettore modalità -->
 <div class="settings-form">
  <div class="form-field">
    <label for="mode">Modalità</label>
    <select id="mode" class="control" [(ngModel)]="mode">
      <option value="manuale">Manuale</option>
      <option value="automatica">Automatica</option>
    </select>
 </div>
</div>

<!-- Form manuale -->
<div class="settings-form" *ngIf="mode === 'manuale'">
  <form [formGroup]="settingsForm">
    <div class="form-field">
      <label for="work">Focus (minuti)</label>
      <input type="number" id="work" class="control" placeholder="Focus" formControlName="work">
    </div>
    <div class="form-field">
      <label for="break">Riposo (minuti)</label>
      <input type="number" id="break" class="control" placeholder="Riposo" formControlName="break">
    </div>
    <div class="form-field">
      <label for="cicle">Numero cicli</label>
      <input type="number" id="cicle" class="control" placeholder="Numero cicli" formControlName="cicle">
    </div>
  </form>
</div>

<!-- Form automatica -->
<div class="settings-form" *ngIf="mode === 'automatica'">
  <div class="form-field">
    <label for="total">Minuti totali</label>
    <input type="number"
           id="total"
           class="control"
           placeholder="Minuti totali"
           [(ngModel)]="totalMinutes"
           name="totalMinutes"
           (ngModelChange)="generateScenarios()">
  </div>

  <!-- Scenari generati -->
  <div *ngIf="scenari.length > 0">
    <h3>Scenari consigliati:</h3>
    <ul>
      <li *ngFor="let s of scenari">
        <strong>{{ s.cicle }} cicli</strong>: {{ s.work }} min focus, {{ s.break }} min pausa
        (Totale: {{ s.total }} min)
      </li>
    </ul>
  </div>
</div>

<!-- Pulsanti azione -->
<div class="dialog-actions">
  <button class="btn btn--secondary" (click)="close()">Cancella</button>
  <button class="btn btn--primary"
          [disabled]="mode === 'manuale' ? settingsForm.invalid : !totalMinutes"
          (click)="close(true)">
    Salva
  </button>
</div>
