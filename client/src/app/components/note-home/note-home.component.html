<h1>Le tue note</h1>

<div class="toolbar">
  <button routerLink="../editor" class="new-note-btn">Nuova Nota</button>

  <div class="filters">

    <label>Ordina per:</label>
    <select [(ngModel)]="sortBy">
      <option value="createdAt">Ultima Modifica</option>
      <option value="title">Titolo</option>
      <option value="lengthAsc">Lunghezza (1-N)</option>
      <option value="lengthDesc">Lunghezza (N-1)</option>
    </select>
    
    <label>Categoria:</label>
    <select [(ngModel)]="selectedCategory">
      <option value="Tutte">Tutte</option>
      <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
    </select>

    <input [(ngModel)]="searchText" placeholder="Cerca per titolo..." />
  </div>
</div>

<div class="note-card" *ngFor="let note of sortedNotes()">
  <div class="note-header">
    <h2>{{ note.title }}</h2>
    <small class="note-date">Ultima modifica: {{ note.updatedAt | date:'short' }}</small>
  </div>

  <div class="note-categories">
    <span *ngFor="let cat of note.categories" class="tag">{{ cat }}</span>
  </div>

  <div class="note-preview">{{ getPreviewText(note.content) }}</div>

  <div class="note-actions">
    <button [routerLink]="['/home/editor', note.id]" class="btn edit">Modifica</button>
    <button (click)="duplicateNote(note.id)" class="btn duplicate">Duplica</button>
    <button (click)="deleteNote(note.id)" class="btn delete">Elimina</button>
  </div>
</div>